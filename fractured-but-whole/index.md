---
layout: document
title: '完整破碎: 海盗基金会小行星带通讯网白皮书'
---
# 完整破碎: 海盗基金会小行星带通讯网白皮书
#### Fractured but Whole: Assaulted Poseidonia

![](images/dst.svg)

## 导言

小行星带是火星与木星之间无数石块组成的巨大结构，在人类殖民太阳系后，先后在小行星带建立了33个星际殖民地，这些殖民地既是人类星际贸易的中转站，也是百万小行星带人民的生活家园。

与地球和火星这样的世界不同，小行星带的人口太少，而距离太远。在最坏的情况下，从小行星带的一个殖民地到另一个殖民地，直线距离将超过从地球到木卫六——而且中间还隔着个太阳。

在大尺度上可靠地传输数据一直是一项巨大挑战，以IPNS为首的组织成功建立了基于基站的服务模式，并把小行星带和火星划入同一个网域——这无异于将澳大利亚划进南美洲。

在本白皮书中，我们将介绍一种适用于小行星带或其他类似大尺度区域的分布式通讯解决方案，它是一组覆盖OSI网络模型第一层到第四层的通信协议，其目标是实现可靠廉价的长距离通信。

## 现存方案

星际互联网的基本架构在数百年来并没有大的改变: 从主干向下，层层分支，每个子网之间通过数个甚至一个网关交换数据，并由一个中心机构分配地址。

而在具体实现上，我们人类成功发明了一套非常便于进行价格歧视的系统：中微子、激光、无线电三级通信。

电波是短距离通信中最常用的载体，基于无线电的网络通信在互联网诞生之初就已经迅速成熟。在互联网诞生之初，人们在自家房间里安装基站，以便自己的设备能在附近接入网络，这种方式快速、廉价，但一旦远离基站，网络就会迅速消失。如果你在21世纪初看到有一群人举着终端围在一起，那附近大概是能找到一个基站的——在网络缺乏的古代，这个基站就像沙漠中的绿洲一样。

但我们如今的情况又有什么不同呢？没错，人类在地球、月球和火星实现了覆盖全球的通信网络，但在星际空间，在小行星带，我们还是只能在有人的星球附近找到基站——而这甚至不是互联网，毕竟，星球之间可没有架设光纤。

当然，我们有激光和中微子——利用巨大的能量和昂贵的设备进行长距离高速通信。一个商务人士可以用它们进行每日工作，一个普通的六国集团公民可以用它们获得一些重要信息。但如果是一个居住在驿宁的数据矿工、或是一个居住在波塞冬尼亚媒体工作者，想给小行星带另一头的恋人发一封情书，他们需要付出月工资的几成呢？

我们可以注意到，廉价、高速和可靠，是不能兼得的。

## 廉价可靠的传输系统

毫无疑问，接入网络是一项基本人权。对我们来说，社会不只要能提供高质量的原生食品，也要能提供廉价但足以果腹的合成食品。同理，我们不仅要有高速可靠的中微子网络，也需要不那么快但所有人都负担得起的廉价网络。

海盗基金会已经在驿宁建立了近乎免费的本地网络，我们也希望小行星带人民——无论是地表居民、还是空间游民——都能使用我们的网络。

分布式文件传输协议(Distributed File Transmission Protocol, DFTP)是海盗基金会主导开发的开放星际传输协议，其目的是利用大量廉价硬件进行可靠的超长距离数据传输。

在分布式通信网上，分布式传输节点(DTN)将承担大部分数据传输功能，两个相邻的DTN通过高频通信建立可靠连接，接着数据包就能接力通过整个网络。每个节点将获得一个可变长的在线地址，该地址最长将可达到1024位，即，最多可以容纳10^300个节点。

在大尺度下维持双向通信流需要花费大量资源，因为沿途的节点必须记录通信双方的状态，而巨大的通信延迟也让基于回执的可靠传输不再那么可靠——如果回执到达花费的时间比输出所有数据报的时间还长，重发机制还有什么意义？

因此在本文所介绍的方案中，将不再试图将数据传输的可靠性建立在发送端和接收端之间的相互确认，而是将其作为整个网络的基本服务。

建成的小行星带通讯网不仅能发送数据，还将在一定时间内保存数据。

当一份文件被上传至网络后，其内容将被拆成大小合适的块，保存在整个分布式网络中，而其索引将在12小时内广播到整个网络的所有节点。当接收端开始接受，它将从最近的节点下载暂存的数据块，重新拼成原始文件。

每个文件块将基于其散列值逐渐均匀散布到整个小行星带，保证接收端能从网络的任何位置回收文件。同时，对于一对多的消息发送，发送端将不再需要建立一对一的管道，而是由各个接收端分别从网络下载内容。

由基金会生产的传输节点已经覆盖了30%的小行星带，如果您愿意，您也可以下载开源硬件蓝图，制作您自己的节点。

## 但是，我该怎么看小电影

只有网络连接是不够的，一个超级局域网并不能让小行星带人民和外界连接起来。为了接入国际互联网，计划中，将有360台网关均匀分布在小行星带中，在任意时刻，架设在火星的基站都能与至少3台网关通信。网关将转换DFTP与DSTP的数据包以便双方的节点相互通信。

任何愿意架设网关的第三方运营商也可以将他们的网关直接接入小行星带网络，作为新的出口提供服务。

## 收了可观的小费后，酒馆老板小声道

小行星带通信网并不是免费的。

为了激励通信节点所有者，参与处理、传输和存储信息的节点将通过智能合约从消息发送者的账户里扣取费用。在网络上，该费用将以分布式文件传输代币(Distributed File Transmission Token)结算。

在发送文件请求中，发送者可以指定传输费用的上限，而后节点将通过索引信息计算出传输的可行性，通过检验后，参与节点将进行扣款。

在网络建设初期，基金会将销售DFTT以获取硬件生产费用，已经存在于网络上的DFTT将可以根据所有者的意愿发送给任何人。

## 参考文献